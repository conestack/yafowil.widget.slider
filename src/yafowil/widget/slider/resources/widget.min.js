!function(e,s){"use strict";class t{static initialize(e){s(".yafowil_slider",e).each((function(){new t(s(this))}))}constructor(e){this.elem=e,this.input=s("input.slider_value",this.elem),this.slider_elem=s("div.slider",this.elem),this.slider_width=this.elem.width(),this.offset=this.elem.offset().left,this.slider_handle_width=20,this.value=0,this.options=this.elem.data(),this.binder();let t=this.slider_handle_elem=s(`\n            <div class="slider-handle" \n                 style="width:${this.slider_handle_width}px;\n                        height:${this.slider_handle_width}px"/>\n        `),i=this.slider_value_track=s('\n            <div class="slider-value-track" />\n        '),l=s('\n            <div class="slider-bg" />\n        ');if(this.slider_elem.append(l),this.slider_elem.append(i),this.slider_elem.append(t),this.handle_mousedown=this.handle_mousedown.bind(this),this.handle_drag=this.handle_drag.bind(this),1==this.options.range){let e=this.slider_handle_elem_end=s(`\n                <div class="slider-handle-end" \n                     style="width:${this.slider_handle_width}px;\n                            height:${this.slider_handle_width}px"/>\n            `);this.slider_elem.append(e),this.slider_handle_elem.on("mousedown",this.handle_range_slider.bind(this)),this.slider_handle_elem_end.on("mousedown",this.handle_range_slider.bind(this))}else this.slider_handle_elem.off("mousedown").on("mousedown",this.handle_mousedown)}binder(){let e={};if(!0===this.options.range?(e.lower_display=s("span.lower_value",this.elem),e.upper_display=s("span.upper_value",this.elem),e.lower_value=s("input.lower_value",this.elem),e.upper_value=s("input.upper_value",this.elem),this.options.values=[e.lower_value.val(),e.upper_value.val()]):(e.display=s("span.slider_value",this.elem),e.value=s("input.slider_value",this.elem),this.options.value=e.value.val()),this.options.slide){var t=this.options.slide;this.options.slide=this.lookup_callback(t)}else this.options.slide=this.callback;if(this.options.change){t=this.options.change;this.options.change=this.lookup_callback(t)}else this.options.change=this.callback;this.elem.data("slider_elements",e)}handle_mousedown(e){e.preventDefault(),this.elem.off("mousemove").on("mousemove",this.handle_drag)}handle_drag(e){e.preventDefault(),e.stopPropagation();let t,i=e.clientX-this.offset;if(i=this.prevent_overflow(i),this.options.min&&this.options.max&&(t=this.transform_to_range(i)),this.options.step){let e=this.transform_to_range(i);t=this.transform_to_step_value(e),i=this.transform_to_display(t)}s("span.slider_value",this.elem).text(t),this.slider_value_track.css("width",i),this.slider_handle_elem.css("left",i+"px"),s(window).on("mouseup",(()=>{this.elem.off("mousemove")}))}prevent_overflow(e){return e>=this.slider_width?e=this.slider_width:e<=0&&(e=0),e}handle_range_slider(e){e.preventDefault(),e.stopPropagation();let t=s(e.target);s(this.elem).off("mousemove").on("mousemove",(e=>{e.preventDefault(),e.stopPropagation();let i=parseFloat(this.slider_handle_elem.css("left")),l=parseFloat(this.slider_handle_elem_end.css("left")),a=this.prevent_overflow(e.clientX-this.offset),n=t.attr("class");if("slider-handle"===n){i=parseInt(a);let e=this.transform_to_range(i);s(".lower_value").text(e)}else if("slider-handle-end"===n){l=parseInt(a);let e=this.transform_to_range(l);s(".upper_value").text(e)}t.css("left",a+"px");let o=l-i;this.slider_value_track.css("width",o+"px").css("left",i+"px")})),s(window).on("mouseup",(()=>{this.elem.off("mousemove")}))}transform_to_step_value(e){let s=e,t=this.options.step,i=this.options.max;return s=s>=i-t/2?i:t*parseInt(s/t),s}transform_to_display(e){let s=this.slider_width,t=e,i=this.options.min,l=(t-i)/(this.options.max-i)*(s-0)+0;return l=parseInt(l),l}transform_to_range(e){let s=this.slider_width,t=this.options.min,i=(e-0)/(s-0)*(this.options.max-t)+t;return i=parseInt(i),i}lookup_callback(e){source=e.split(".");var s,t=window;for(var i in source){if(void 0===t[s=source[i]])throw"'"+s+"' not found.";t=t[s]}return t}callback(e,t){var i=s(e.target).parents(".yafowil_slider"),l=i.data(),a=i.data("slider_elements");!0===l.range?(a.lower_value.attr("value",t.values[0]),a.upper_value.attr("value",t.values[1]),a.lower_display.html(t.values[0]),a.upper_display.html(t.values[1])):(a.value.attr("value",t.value),a.display.html(t.value))}}s((function(){void 0!==window.ts?ts.ajax.register(t.initialize,!0):t.initialize()})),e.Slider=t,Object.defineProperty(e,"__esModule",{value:!0}),void 0===window.yafowil&&(window.yafowil={}),window.yafowil.slider=e}({},jQuery);
