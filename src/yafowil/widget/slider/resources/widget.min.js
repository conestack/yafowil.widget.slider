!function(e,t){"use strict";class s{static initialize(e){t(".yafowil_slider",e).each((function(){new s(t(this))}))}constructor(e){this.elem=e,this.options=this.elem.data(),this.bind_options();this.supports_touch="ontouchstart"in window||navigator.msMaxTouchPoints,this.slider_handle_dim=this.supports_touch?30:20,this.input=t("input.slider_value",this.elem),this.slider_elem=t("div.slider",this.elem);let s=this.slider_handle_elem=t(`\n            <div class="slider-handle" \n                 style="width:${this.slider_handle_dim}px;\n                        height:${this.slider_handle_dim}px"/>\n        `),i=this.slider_value_track=t('\n            <div class="slider-value-track" />\n        '),l=t('\n            <div class="slider-bg" />\n        ');if(this.slider_elem.append(l).append(i).append(s),this.handle_mousedown=this.handle_mousedown.bind(this),this.handle_touch=this.handle_touch.bind(this),this.handle_drag=this.handle_drag.bind(this),this.handle_touch_range=this.handle_touch_range.bind(this),1==this.options.range){let e=this.slider_handle_elem_end=t(`\n                <div class="slider-handle-end"\n                     style="width:${this.slider_handle_dim}px;\n                            height:${this.slider_handle_dim}px"/>\n            `);this.slider_elem.append(e),this.handle_drag_range=this.handle_drag_range.bind(this),this.slider_handle_elem.on("mousedown",this.handle_drag_range),this.slider_handle_elem_end.on("mousedown",this.handle_drag_range),this.supports_touch&&(this.slider_handle_elem[0].addEventListener("touchstart",this.handle_touch_range,!1),this.slider_handle_elem_end[0].addEventListener("touchstart",this.handle_touch_range,!1))}else this.slider_handle_elem.off("mousedown").on("mousedown",this.handle_mousedown),this.supports_touch&&this.slider_handle_elem[0].addEventListener("touchstart",this.handle_touch,!1);this.init_position()}bind_options(){let e={};!0===this.options.range?(e.lower_display=t("span.lower_value",this.elem),e.upper_display=t("span.upper_value",this.elem),e.lower_value=t("input.lower_value",this.elem),e.upper_value=t("input.upper_value",this.elem),this.options.values=[e.lower_value.val(),e.upper_value.val()]):(e.display=t("span.slider_value",this.elem),e.value=t("input.slider_value",this.elem),this.options.value=e.value.val()),this.elem.data("slider_elements",e)}init_position(){if(this.options.min||this.options.max||(this.options.min=0,this.options.max=100),"vertical"===this.options.orientation?(this.slider_elem.addClass("slider-vertical"),this.slider_dim=this.slider_elem.height(),this.offset=this.slider_elem.offset().top):(this.slider_dim=this.elem.width(),this.offset=this.elem.offset().left),!0===this.options.range){let e=this.options.values[0],t=this.options.values[1],s=[this.transform_to_display(e),this.transform_to_display(t)];this.set_position(s)}else if(this.options.value){let e=this.options.value,t=this.transform_to_display(e);this.set_position(t)}"max"===this.options.range&&("vertical"===this.options.orientation?this.slider_value_track.css("bottom",0).css("top","unset"):this.slider_value_track.css("right",0)),this.supports_touch&&this.elem.addClass("touch-support")}handle_mousedown(e){e.preventDefault(),this.elem.off("mousemove").on("mousemove",this.handle_drag)}handle_touch(){let e=function(s){let i;s.preventDefault(),s.stopPropagation(),i="vertical"===this.options.orientation?s.touches[0].pageY:s.touches[0].pageX;let l=this.prevent_overflow(i-this.offset),n=this.transform_to_range(l);this.options.step&&(n=this.transform_to_step_value(n),l=this.transform_to_display(n));this.set_position(l),t("span.slider_value",this.elem).text(n),document.addEventListener("touchend",function(){document.removeEventListener("touchmove",e)}.bind(this),!1)}.bind(this);document.addEventListener("touchmove",e,{passive:!1})}handle_touch_range(e){let s=e.target,i=function(e){e.preventDefault(),e.stopPropagation();let i,l=[];"vertical"===this.options.orientation?(l[0]=parseInt(this.slider_handle_elem.css("top")),l[1]=parseInt(this.slider_handle_elem_end.css("top")),i=e.touches[0].pageY):(l[0]=parseInt(this.slider_handle_elem.css("left")),l[1]=parseInt(this.slider_handle_elem_end.css("left")),i=e.touches[0].pageX);let n=this.prevent_overflow(i-this.offset);n=parseInt(n);let o=this.transform_to_range(n),h=t(s).attr("class");if("slider-handle"===h){if(i-this.offset>l[1]-this.slider_handle_dim+10)return;l[0]=n,t(".lower_value").text(o)}else if("slider-handle-end"===h){if(i-this.offset<l[0]+this.slider_handle_dim-10)return;l[1]=n,t(".upper_value").text(o)}this.set_position(l)}.bind(this);document.addEventListener("touchmove",i,{passive:!1}),document.addEventListener("touchend",function(){document.removeEventListener("touchmove",i)}.bind(this),!1)}handle_drag(e){let s;e.preventDefault(),e.stopPropagation(),s="vertical"===this.options.orientation?e.pageY:e.pageX;let i=this.prevent_overflow(s-this.offset),l=this.transform_to_range(i);this.options.step&&(l=this.transform_to_step_value(l),i=this.transform_to_display(l)),this.set_position(i),t("span.slider_value",this.elem).text(l),t(window).on("mouseup",(()=>{this.elem.off("mousemove")}))}handle_drag_range(e){e.preventDefault(),e.stopPropagation();let s=t(e.target);t(this.elem).off("mousemove").on("mousemove",(e=>{e.preventDefault(),e.stopPropagation();let i,l=[];"vertical"===this.options.orientation?(l[0]=parseInt(this.slider_handle_elem.css("top")),l[1]=parseInt(this.slider_handle_elem_end.css("top")),i=e.pageY):(l[0]=parseInt(this.slider_handle_elem.css("left")),l[1]=parseInt(this.slider_handle_elem_end.css("left")),i=e.pageX);let n=this.prevent_overflow(i-this.offset);n=parseInt(n);let o=this.transform_to_range(n),h=s.attr("class");if("slider-handle"===h){if(i-this.offset>l[1]-this.slider_handle_dim)return;l[0]=n,t(".lower_value").text(o)}else if("slider-handle-end"===h){if(i-this.offset<l[0]+this.slider_handle_dim)return;l[1]=n,t(".upper_value").text(o)}this.set_position(l)})),t(window).on("mouseup",(()=>{this.elem.off("mousemove")}))}prevent_overflow(e){return e>=this.slider_dim?e=this.slider_dim:e<=0&&(e=0),e}set_position(e){let t=this.options.orientation,s=this.options.range;if("vertical"===t)if("max"===s)this.slider_value_track.css("height",this.slider_dim-e),this.slider_handle_elem.css("top",e+"px");else if(!0===s){this.slider_handle_elem.css("top",e[0]),this.slider_handle_elem_end.css("top",e[1]);let t=e[1]-e[0];this.slider_value_track.css("height",t+"px").css("top",e[0]+"px")}else this.slider_value_track.css("height",e),this.slider_handle_elem.css("top",e+"px");else if("max"===s)this.slider_value_track.css("width",this.slider_dim-e),this.slider_handle_elem.css("left",e+"px");else if(!0===s){this.slider_handle_elem.css("left",e[0]),this.slider_handle_elem_end.css("left",e[1]);let t=e[1]-e[0];this.slider_value_track.css("width",t+"px").css("left",e[0]+"px")}else this.slider_value_track.css("width",e),this.slider_handle_elem.css("left",e+"px")}transform_to_step_value(e){let t=this.options.step,s=this.options.max;return e=e>=s-t/2?s:t*parseInt(e/t)}transform_to_display(e){let t=this.slider_dim*((e-this.options.min)/(this.options.max-this.options.min));return t=parseInt(t),t}transform_to_range(e){let t=(this.options.max-this.options.min)*(e/this.slider_dim)+this.options.min;return t=parseInt(t),t}}t((function(){void 0!==window.ts?ts.ajax.register(s.initialize,!0):s.initialize()})),e.Slider=s,Object.defineProperty(e,"__esModule",{value:!0}),void 0===window.yafowil&&(window.yafowil={}),window.yafowil.slider=e}({},jQuery);
